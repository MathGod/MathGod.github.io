<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://mathgod.github.io/</id>
    <title>老王博客</title>
    <updated>2020-02-12T08:55:50.064Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://mathgod.github.io/"/>
    <link rel="self" href="https://mathgod.github.io/atom.xml"/>
    <subtitle>记录生活点滴、分享前端技术。</subtitle>
    <logo>https://mathgod.github.io/images/avatar.png</logo>
    <icon>https://mathgod.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, 老王博客</rights>
    <entry>
        <title type="html"><![CDATA[本打算年后回到公司就提辞职的，由于假期延长一拖再拖。]]></title>
        <id>https://mathgod.github.io/r0p4CTNqT</id>
        <link href="https://mathgod.github.io/r0p4CTNqT">
        </link>
        <updated>2020-02-11T14:08:15.000Z</updated>
        <content type="html"><![CDATA[<p>今天是年后上班的第二天。下午，厂里有个员工测出高温，于是公司突然宣布又多放五天假。打电话给120处理了。</p>
<p>晚上的时候，听保安说，那个员工体温又正常了，说他过年没回家一直留在厂里，应该是泡面吃多了上火...然而放假通知已经发出去收不回来了。</p>
<p>考虑到员工安全，公司决定不给住宿的人离开公司。所以我又要在宿舍呆多5天，要是一个人住还好，然而还有爱外放吵闹的舍友（集体间）。这种宿舍住得一点都不爽，影响作息，也是我想辞职的原因。（别问我为什么不外面租房，那点工资经不起折腾）</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[从输入URL到页面加载发生了什么？]]></title>
        <id>https://mathgod.github.io/bQ0Q2_4_0</id>
        <link href="https://mathgod.github.io/bQ0Q2_4_0">
        </link>
        <updated>2020-02-06T13:30:18.000Z</updated>
        <summary type="html"><![CDATA[<h4 id="总体来说分为以下几个过程">总体来说分为以下几个过程:</h4>
<p>1.DNS解析<br>
2.TCP连接<br>
3.发送HTTP请求<br>
4.服务器处理HTTP请求<br>
5.页面渲染<br>
6.断开TCP连接</p>
]]></summary>
        <content type="html"><![CDATA[<h4 id="总体来说分为以下几个过程">总体来说分为以下几个过程:</h4>
<p>1.DNS解析<br>
2.TCP连接<br>
3.发送HTTP请求<br>
4.服务器处理HTTP请求<br>
5.页面渲染<br>
6.断开TCP连接</p>
<!-- more -->
<p>仔细思考这个问题，发现确实很深，这个过程涉及到的东西很多。这个问题的回答真的能够很好的考验一个web工程师的水平<br>
注：这题胜在区分度高，知识点覆盖广，再不懂的人，也能答出几句，<br>
而高手可以根据自己擅长的领域自由发挥，从URL规范、HTTP协议、DNS、CDN、数据库查询、<br>
到浏览器流式解析、CSS规则构建、layout、paint、onload/domready、JS执行、JS API绑定等等；</p>
<h1 id="1dns解析">1.DNS解析</h1>
<p>DNS查询顺序如下，若其中一步成功则直接跳到建立链接部分：</p>
<p>浏览器自身DNS<br>
操作系统DNS<br>
本地hosts文件<br>
向域名服务器发送请求</p>
<h1 id="2tcp连接">2.TCP连接</h1>
<p>TCP三次握手(three-way handshaking)</p>
<p>发送方:SYN(synchronize)<br>
接收方:SYN/ACK(acknowledgement),确认信息传达<br>
发送方:ACK - 确认接收方在线可收消息，握手结束<br>
Accept<br>
<img src="https://mathgod.github.io//post-images/1581082610268.jpg" alt="" loading="lazy"><br>
（1）第一次握手：建立连接时，客户端A发送SYN包（SYN=j）到服务器B，并进入SYN_SEND状态，等待服务器B确认。</p>
<p>（2）第二次握手：服务器B收到SYN包，必须确认客户A的SYN（ACK=j+1），同时自己也发送一个SYN包（SYN=k），即SYN+ACK包，此时服务器B进入SYN_RECV状态。</p>
<p>（3）第三次握手：客户端A收到服务器B的SYN＋ACK包，向服务器B发送确认包ACK（ACK=k+1），此包发送完毕，客户端A和服务器B进入ESTABLISHED状态，完成三次握手。</p>
<p>TCP三次握手的的好处在于：发送方可以确认接收方仍然在线，不会因为白发送而浪费资源。</p>
<h2 id="https协议">HTTPS协议</h2>
<p>为什么要把HTTPS协议放在这里讲呢？</p>
<p>因为HTTP报文是包裹在TCP报文中发送的，服务端收到TCP报文时候会解包提取出HTTP报文。<br>
但是这个过程中存在一定的风险。HTTP报文是明文，如果中间被截取的话会存在一些信息泄露的危险。那么在进入TCP报文之前对HTTP做一次加密就可以解决这个问题了。HTTPS协议的本质就是HTTP + SSL(or TLS)<br>
<img src="https://mathgod.github.io//post-images/1581082668788.jpg" alt="" loading="lazy"></p>
<h2 id="https过程">HTTPS过程</h2>
<p>HTTPS在传输数据之前需要客户端与服务器进行一个握手(TLS/SSL握手)，在握手过程中将确立双方加密传输数据的密码信息。TLS/SSL使用了非对称加密，对称加密以及hash等。具体过程请参考经典的阮一峰先生的博客TLS/SSL握手过程。<br>
HTTPS相比于HTTP，虽然提供了安全保证，但是势必会带来一些时间上的损耗，如握手和加密等过程，<br>
是否使用HTTPS需要根据具体情况在安全和性能方面做出权衡。</p>
<h1 id="3发送http请求">3.发送HTTP请求</h1>
<p>构建HTTP请求报文并通过TCP协议中发送到服务器指定端口(HTTP协议80/8080, HTTPS协议443)。<br>
HTTP请求报文是由三部分组成: 请求行, 请求报头和请求正文。</p>
<p>请求行：<br>
Method Request-URL HTTP-Version CRLF</p>
<p>请求报头<br>
请求报头允许客户端向服务器传递请求的附加信息和客户端自身的信息。<br>
PS: 客户端不一定特指浏览器，有时候也可使用Linux下的CURL命令以及HTTP客户端测试工具等。<br>
常见的请求报头有: Accept, Accept-Charset, Accept-Encoding, Accept-Language, Content-Type, Authorization, Cookie, User-Agent等。</p>
<p>事件循环(Event loop)<br>
js是单线程，js解析方法时，将同步任务排队到执行栈中，异步任务排队到事件队列中。<br>
事件队列分为:<br>
宏任务：setTimeout，setInterval，setImmediate，I/O，UI交互事件<br>
微任务：process.nextTick，Promise.then<br>
浏览器环境中执行方法时，先将执行栈中的任务清空，再将微任务推到执行栈中并清空，之后检查是否存在宏任务，若存在则取出一个宏任务，执行完成检查是否有微任务，以此循环…</p>
<h1 id="4-服务器处理http请求并返回http报文">4. 服务器处理HTTP请求并返回HTTP报文</h1>
<p>HTTP响应报文也是由三部分组成: 状态码, 响应报头和响应报文。</p>
<h1 id="5浏览器解析渲染页面">5.浏览器解析渲染页面</h1>
<p>使用HTML创建文件对象类型（DOM）<br>
使用CSS创建CSS对象类型（CSSOM）<br>
基于DOM和CSSOM执行脚本（Scripts）<br>
合并DOM和CSSOM形成渲染树（Render Tree)<br>
使用渲染布局（Layout）所有元素渲染（Paint）所有元素</p>
<h1 id="6断开tcp连接4次挥手">6.断开TCP连接（4次挥手）</h1>
<p>(https://cdn.ru23.com/img/2018/12/tcp4次挥手.png)<br>
四次分手<br>
第一次分手：主机1（可以使客户端，也可以是服务器端），设置Sequence Number和Acknowledgment Number，向主机2发送一个FIN报文段；此时，主机1进入FIN_WAIT_1状态；这表示主机1没有数据要发送给主机2了；<br>
第二次分手：主机2收到了主机1发送的FIN报文段，向主机1回一个ACK报文段，Acknowledgment Number为Sequence Number加1；主机1进入FIN_WAIT_2状态；主机2告诉主机1，我“同意”你的关闭请求；<br>
第三次分手：主机2向主机1发送FIN报文段，请求关闭连接，同时主机2进入LAST_ACK状态；<br>
第四次分手：主机1收到主机2发送的FIN报文段，向主机2发送ACK报文段，然后主机1进入TIME_WAIT状态；主机2收到主机1的ACK报文段以后，就关闭连接；此时，主机1等待2MSL后依然没有收到回复，则证明Server端已正常关闭，那好，主机1也可以关闭连接了。</p>
<p>为什么要四次分手<br>
那四次分手又是为何呢？TCP协议是一种面向连接的、可靠的、基于字节流的运输层通信协议。TCP是全双工模式，这就意味着，当主机1发出FIN报文段时，只是表示主机1已经没有数据要发送了，主机1告诉主机2，它的数据已经全部发送完毕了；但是，这个时候主机1还是可以接受来自主机2的数据；当主机2返回ACK报文段时，表示它已经知道主机1没有数据发送了，但是主机2还是可以发送数据到主机1的；当主机2也发送了FIN报文段时，这个时候就表示主机2也没有数据要发送了，就会告诉主机1，我也没有数据要发送了，之后彼此就会愉快的中断这次TCP连接。</p>
<p>文章参考： https://ru23.com/note/e277deca.html</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[网站点缀特效都添加的差不多了，还差个全站PJAX无刷新技术。]]></title>
        <id>https://mathgod.github.io/0VYM6O3u4</id>
        <link href="https://mathgod.github.io/0VYM6O3u4">
        </link>
        <updated>2020-02-04T14:00:24.000Z</updated>
        <summary type="html"><![CDATA[<h4 id="已添加功能">已添加功能:</h4>
<p>1.PWA技术<br>
手机端打开网站可以自动弹出提示框询问是否添加桌面图标。与传统APP相比优势是可以免更新，免下载。<br>
 <br>
2.live2d技术，给博客增加看板娘，增加博客生动性。<br>
 </p>
]]></summary>
        <content type="html"><![CDATA[<h4 id="已添加功能">已添加功能:</h4>
<p>1.PWA技术<br>
手机端打开网站可以自动弹出提示框询问是否添加桌面图标。与传统APP相比优势是可以免更新，免下载。<br>
 <br>
2.live2d技术，给博客增加看板娘，增加博客生动性。<br>
 </p>
<!-- more -->
<p>3.尤雨溪EvanYou随机不规则三角彩条，给博客营造一种优美的氛围。</p>
<p>4.网站粒子吸附背景，增加博客科技感。</p>
<p>5.logo光束扫描技术，增加标题的动态感....</p>
<p>6.头像旋转</p>
<p>7点击爆炸效果</p>
<p>8.背景图片</p>
<p><s>9.音乐播放器</s>（太卡，先删除了）</p>
<p>后续要添加...</p>
<p>标题文字变化效果（哎呀崩溃了。。。又好了..），看板娘自动刷新换衣服。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[发现个有趣规律，晚上网络比早上慢得多]]></title>
        <id>https://mathgod.github.io/Jo40s-Ks6</id>
        <link href="https://mathgod.github.io/Jo40s-Ks6">
        </link>
        <updated>2020-02-01T14:42:43.000Z</updated>
        <content type="html"><![CDATA[<p>早上中午之前网络都很好，晚上点以后网络不给力，由此可推断出上网主力军大多晚睡晚起。</p>
<p>所以我决定早睡早起，错峰上网。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[教初三妹妹学习真的好累。]]></title>
        <id>https://mathgod.github.io/S3pLvWBb_</id>
        <link href="https://mathgod.github.io/S3pLvWBb_">
        </link>
        <updated>2020-01-30T14:27:04.000Z</updated>
        <content type="html"><![CDATA[<p>她真的很差，又懒又蠢作息异常还不肯改。不知道几个月后能否考上高中，哪怕是县里最差的高中也好。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[原来热搜全是明星的日子才是真正的国泰民安]]></title>
        <id>https://mathgod.github.io/KFSyCoevr</id>
        <link href="https://mathgod.github.io/KFSyCoevr">
        </link>
        <updated>2020-01-29T08:56:48.000Z</updated>
        <content type="html"><![CDATA[<p>原来热搜全是明星的日子才是真正的国泰民安</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[今天公司通知上班时间又延迟了，10号上班。。。]]></title>
        <id>https://mathgod.github.io/EBzrCfQKJ</id>
        <link href="https://mathgod.github.io/EBzrCfQKJ">
        </link>
        <updated>2020-01-29T08:39:36.000Z</updated>
        <content type="html"><![CDATA[<p>本来最开始是明天也就是年初六上班的，推迟到3号，现在又推迟到10号。看来辞职找工作都会受到影响。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[4481例了...死亡106...可怕]]></title>
        <id>https://mathgod.github.io/aN-m9Ev6h</id>
        <link href="https://mathgod.github.io/aN-m9Ev6h">
        </link>
        <updated>2020-01-28T01:50:59.000Z</updated>
        <content type="html"><![CDATA[<p>截至目前</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[大年初三，科比去世，阿富汗航班坠机死83人，公司通知假期延长。]]></title>
        <id>https://mathgod.github.io/8izS_1bFg</id>
        <link href="https://mathgod.github.io/8izS_1bFg">
        </link>
        <updated>2020-01-27T15:36:50.000Z</updated>
        <content type="html"><![CDATA[<p>肺炎患者确诊人数持续增加</p>
<p>看来以后真的不能坐飞机，一出事就是团灭，真的是太惨。之前被伊朗打下的乌克兰飞机也是。<br>
科比竟然死了，还有他的二女儿，记得大学时期还看过他的退役赛，一起黑过他踢足球打羽毛球乒乓球，才41岁，正直中年，说不上伤心，有些惋惜罢了。</p>
<p>公司假期延长，小开心。</p>
<p>晚安，地球。</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[大年初二，小镇的大街上没几个人]]></title>
        <id>https://mathgod.github.io/VJIZazifl</id>
        <link href="https://mathgod.github.io/VJIZazifl">
        </link>
        <updated>2020-01-26T12:46:58.000Z</updated>
        <content type="html"><![CDATA[<p>今天转冷了，明天会更冷，街上很荒凉，没年味。</p>
]]></content>
    </entry>
</feed>